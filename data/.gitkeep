# Data Directory

This directory stores all production data in JSON format.

## Files

- `database.json` - Main database file containing:
  - User accounts and profiles
  - OAuth clients (Moodle, CTFd)
  - OAuth authorization codes and tokens
  - User sessions

- `vpn-profiles/` - Directory containing user VPN configuration files
  - Each user gets a `<email>.ovpn` file
  - Files are automatically generated by the VPN backend

## Backup

To backup all data, simply copy this entire `data/` directory:

```bash
# Backup
cp -r data/ backup/data-$(date +%Y%m%d-%H%M%S)/

# Restore
cp -r backup/data-20260129-120000/ data/
```

## Security

- This directory is excluded from git via `.gitignore`
- Contains sensitive user information and VPN configurations
- Ensure proper file permissions in production:
  ```bash
  chmod 700 data/
  chmod 600 data/database.json
  chmod 700 data/vpn-profiles/
  chmod 600 data/vpn-profiles/*.ovpn
  ```

## Initial Setup

The database file is automatically created on first run with:
- Pre-configured OAuth clients for Moodle and CTFd
- Empty user, token, and session arrays

No manual initialization required.
